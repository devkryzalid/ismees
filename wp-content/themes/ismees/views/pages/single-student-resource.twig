{% extends 'base.twig' %}
{% block content %}
<main class="single-resource" data-aos="fade" data-aos-delay="300">
    {% include "partials/banners/banner-image-title-author.twig" with {
            'post': post,
            'taxonomy': 'resource_category',
        }
    %}

    {% include "partials/page-content/content-details-reviews.twig" with {
            'page': post,
            'students': true,
            'backBtnLink': options.config_students_resources,
            'backBtnText': __('Retour aux ressources', 'ismees')
        }
    %}
    
    {% include "partials/more-resources.twig" with {
        'items': related_posts,
        'taxonomy': 'resource_category',
        'redirectionUrl': options.config_students_resources
    } %}
</main>
{% endblock %}

{% block addsearch_param %}
    <script id="addsearch-param" type="application/json">
        {{ addsearch_array|json_encode }}
    </script>
{% endblock %}

{% block addsearch_meta %}
    {% set meta_tags = {
        'category': categories,
        'type': types,
        'subject': subjects_addSearch,
        'title': post.title,
        'icon': icon,
        'image': post.thumbnail
    } %}
    {% for tag, value in meta_tags %}
        {% if value %}
            {% if value is iterable %}
                {% set meta_content = [] %}
                {% for item in value %}
                    {% set meta_content = meta_content|merge([tag ~ "=" ~ item]) %}
                {% endfor %}
                <meta name="addsearch-custom-field" data-type="text" content="{{ meta_content|join(';') }}">
            {% else %}
                <meta name="addsearch-custom-field" data-type="text" content="{{ tag }}={{ value }}">
            {% endif %}
        {% endif %}
    {% endfor %}
{% endblock %}
