{% extends 'base.twig' %}
{% block content %}
<main class="single-subject" data-aos="fade" data-aos-delay="300">
    {% include "partials/banners/banner-image-title.twig" with {
            'post': thematic,
            'fullHeight': true,
            'taxonomy': 'thematic_intervention',
            'containerClass': 'container',
            'reverseBreadscrum': true
        }
    %}

    {% include "partials/page-content/content-reviews-socials.twig" with {
            'page': thematic,
            'backBtnLink': options.config_subjects,
            'backBtnText': __('Retour aux niveaux dâ€™intervention', 'ismees')
        }
    %}
    
    {% include "partials/more-resources.twig" with {
        'items': thematic.meta('resources'),
        'taxonomy': 'resource_category',
        'redirectionUrl': options.config_students_resources ~ '?subjects=' ~ thematic.id
    } %}
</main>
{% endblock %}
{% block specific_script %}
	<script src="{{ theme.link }}/dist/scripts/pages/single-thematic.js"></script>
    <script src="{{ theme.link }}/dist/scripts/pages/singles.js"></script>
{% endblock %}

{# META FOR ADDSEARCH CUSTOM FIELDS #}
{% block addsearch_meta %}
    {% set meta_tags = {
        'page': 'research',
        'title': thematic.title,
        'subject_ids': thematic.id,
        'image': thematic.thumbnail,
        'resource': 'member'
    } %}
    
    {% for tag, value in meta_tags %}
        {% if value %}
            {% if value is iterable %}
                {% set meta_content = [] %}
                {% for item in value %}
                    {% set meta_content = meta_content|merge([tag ~ "=" ~ item]) %}
                {% endfor %}
                <meta name="addsearch-custom-field" data-type="text" content="{{ meta_content|join(';') }}">
            {% else %}
                <meta name="addsearch-custom-field" data-type="text" content="{{ tag }}={{ value }}">
            {% endif %}
        {% endif %}
    {% endfor %}
{% endblock %}